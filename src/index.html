
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highstock Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <style type="text/css">
${demo.css}
        </style>
        <script type="text/javascript">
$(function() {


    drawAll = function(){
        series = []
        rqs = []
        rqs[0] = $.getJSON('http://localhost:{PORT}/pl-byd-esxi11-ilo/temperature/', function(data) {
            $.each(data, function(i,sensor)
            {
                rqs.push($.getJSON('http://localhost:{PORT}/pl-byd-esxi11-ilo/temperature/?sensor='+escape(sensor), function(data) {
                    console.log('done');
                    series[i] = {
                        name: sensor,
                        data: data
                    };
                }));
            });
            
            $.when.apply($, rqs).then(function(){
                console.log('all done');
                $('#container').highcharts('StockChart', {

                    rangeSelector : {
                        selected : 1,
                        inputEnabled: $('#container').width() > 480
                    },

                    title : {
                        text : 'temperature'
                    },
                    
                    series : series
               });
            });
        });
    }

    drawAll()
    

});

        </script>
    </head>
    <body>
<script src="http://code.highcharts.com/stock/highstock.js"></script>

<div id="container" style="height: 400px; min-width: 310px"></div>

    </body>
</html>
